<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <style>
        * {
            margin: 0;
            font-family: "Gill Sans";
        }
        html, body {
            background-color: black;
            color: white;
        }
        svg {
            width: 100%;
            height: 100vh;
            display: block;
            cursor: none;
        }
    </style>
</head>
<body>
    <svg>
        <path id="spinner_background" fill="none" stroke="#555" stroke-width="9" />
        <path id="spinner" fill="none" stroke="white" stroke-width="15" />
        <text id="label" font-size="80" fill="white" text-anchor="middle"></text>
        <text id="label2" font-size="30" fill="white" text-anchor="middle"></text>
        <text id="label3" font-size="20" fill="white" text-anchor="middle"></text>
    </svg>
    <script>
        // via https://stackoverflow.com/a/18473154
        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
            var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;

            return {
                x: centerX + (radius * Math.cos(angleInRadians)),
                y: centerY + (radius * Math.sin(angleInRadians))
            };
        }

        function describeArc(x, y, radius, startAngle, endAngle){

            var start = polarToCartesian(x, y, radius, endAngle);
            var end = polarToCartesian(x, y, radius, startAngle);

            var largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";

            var d = [
                "M", start.x, start.y,
                "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y
            ].join(" ");

            return d;
        }

        // ---------------------------------------------------------------------

        // Usage:
        // * disable notifications (macOS does this out of the box when mirroring)
        // * disable idle sleep (on macOS: pmset noidle)
        // * uncheck "Always Show Toolbar in Full Screen" in Chrome's "View" menu and go fullscreen
        // * adjust exam duration below
        // * open this file in Chrome
        // * a blank screen will appear
        // * when everyone's ready, click anywhere to start timer

        duration = 90;  // in min

        show = false;
        document.onclick = function(event) {
            if (!show) {
                show = true;
                s = new Date();
                e = new Date(s.getTime() + duration*60000);
            }
        };

        setInterval(function() {
            if (show) {
                remaining = Math.max(e.getTime() - (new Date()).getTime(), 0);
                remainingDeg = remaining / (duration*60000) * 360;

                x=window.innerWidth/2;
                y=window.innerHeight/2-30;  // adjust this to move everything vertically

                document.getElementById("spinner").setAttribute("d", describeArc(x, y, 200, 360-remainingDeg, 360));
                document.getElementById("spinner_background").setAttribute("d", describeArc(x, y, 200, 0, 359.999));
                document.getElementById("label").setAttribute("x", x);
                document.getElementById("label").setAttribute("y", y);
                document.getElementById("label").innerHTML = Math.ceil(remaining/60000) + "m";

                document.getElementById("label2").setAttribute("x", x);
                document.getElementById("label2").setAttribute("y", y+60);
                document.getElementById("label2").innerHTML = "REMAINING";

                document.getElementById("label3").setAttribute("x", x);
                document.getElementById("label3").setAttribute("y", y+260);
                document.getElementById("label3").innerHTML = "START: " + s.toTimeString().substring(0,5) + " â€“ END: " + e.toTimeString().substring(0,5);
            }
        }, 100);
    </script>
</body>
</html>
